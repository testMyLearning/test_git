<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">  <!-- 1. Подключаем Thymeleaf -->
<head>
    <meta charset="UTF-8">  <!-- 2. Кодировка для русских букв -->
    <title>Вход в планировщик</title>  <!-- 3. Заголовок вкладки -->

    <!-- 4. Простые стили прямо здесь -->
    <style>
        body {
            font-family: Arial, sans-serif;  /* Шрифт */
            background-color: #f5f5f5;  /* Светло-серый фон */
            margin: 0;  /* Убираем отступы */
            padding: 20px;  /* Отступы вокруг страницы */
        }

        .login-box {
            width: 300px;  /* Ширина формы */
            margin: 100px auto;  /* Центрируем по горизонтали, отступ сверху */
            padding: 20px;  /* Внутренние отступы */
            background: white;  /* Белый фон формы */
            border-radius: 5px;  /* Скругленные углы */
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);  /* Тень */
        }

        h2 {
            text-align: center;  /* Заголовок по центру */
            color: #333;  /* Темно-серый цвет */
        }

        input {
            width: 100%;  /* Ширина на всю форму */
            padding: 10px;  /* Внутренние отступы */
            margin-bottom: 15px;  /* Отступ снизу */
            border: 1px solid #ddd;  /* Серая рамка */
            border-radius: 4px;  /* Скругленные углы */
            box-sizing: border-box;  /* Чтобы padding не увеличивал ширину */
        }

        button {
            width: 100%;  /* Ширина на всю форму */
            padding: 12px;  /* Внутренние отступы */
            background: #4CAF50;  /* Зеленый цвет */
            color: white;  /* Белый текст */
            border: none;  /* Без рамки */
            border-radius: 4px;  /* Скругленные углы */
            cursor: pointer;  /* Курсор-рука при наведении */
            font-size: 16px;  /* Размер текста */
        }

        button:hover {
            background: #45a049;  /* Темнее при наведении */
        }

        .error {
            color: red;  /* Красный цвет для ошибок */
            text-align: center;  /* Текст по центру */
            margin-bottom: 15px;  /* Отступ снизу */
            padding: 10px;  /* Внутренние отступы */
            background: #ffe6e6;  /* Светло-красный фон */
            border-radius: 4px;  /* Скругленные углы */
        }

        .links {
            text-align: center;  /* Текст по центру */
            margin-top: 20px;  /* Отступ сверху */
        }

        .links a {
            color: #4CAF50;  /* Зеленый цвет ссылок */
            text-decoration: none;  /* Без подчеркивания */
        }
    </style>
</head>
<body>

<!-- 5. Основной контейнер формы -->
<div class="login-box">

    <!-- 6. Заголовок -->
    <h2>Вход в планировщик задач</h2>

    <!-- 7. Показываем ошибку, если неправильный логин/пароль -->
    <!-- th:if - показываем только если есть ошибка -->
    <div th:if="${param.error}" class="error">
        ❌ Неправильный логин или пароль!
    </div>

    <!-- 8. Показываем сообщение, если вышел из системы -->
    <div th:if="${param.logout}" style="color: green; text-align: center; margin-bottom: 15px;">
        ✅ Вы успешно вышли из системы
    </div>

    <!-- 9. ФОРМА ЛОГИНА - САМОЕ ВАЖНОЕ! -->
    <!--
        method="post" - отправляем POST запрос
        action="/login" - отправляем на /login (Spring Security обработает)
        th:action="@{/login}" - Thymeleaf сформирует правильный URL
    -->
    <form method="post" th:action="@{/login}">

        <!-- 10. Поле для имени пользователя -->
        <div>
            <!-- name="username" - ОБЯЗАТЕЛЬНОЕ имя для Spring Security -->
            <input type="text" name="username" placeholder="Email" required>
        </div>

        <!-- 11. Поле для пароля -->
        <div>
            <!-- name="password" - ОБЯЗАТЕЛЬНОЕ имя для Spring Security -->
            <input type="password" name="password" placeholder="Пароль" required>
        </div>

        <!-- 12. Кнопка отправки -->
        <button type="submit">Войти</button>
    </form>

    <!-- 13. Ссылки под формой -->
    <div class="links">
        <!-- 14. Ссылка на регистрацию -->
        <p>Нет аккаунта? <a th:href="@{/registration}">Зарегистрироваться</a></p>

        <!-- 15. Ссылка на главную -->
        <p><a th:href="@{/}">← На главную</a></p>
    </div>
</div>

</body>
</html>